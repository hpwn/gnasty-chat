services:
  gnasty:
    build: .
    entrypoint: ["/app/harvester"]
    command:
      - -sqlite
      - /data/elora.db
      - -http-addr
      - :8765
      - -youtube-url
      - ${YOUTUBE_URL}
      - -twitch-channel
      - rifftrax
      - -twitch-nick
      - hp_az
      - -twitch-token-file
      - /data/twitch_irc.pass
      - -twitch-refresh-token-file
      - /data/twitch_refresh.pass
      - -twitch-tls
      - ${TWITCH_TLS-true}
    environment:
      GN_SQLITE_TUNING: "${GN_SQLITE_TUNING-0}"
    ports: ["8765:8765"]
    volumes: ["./data:/data"]
    restart: unless-stopped
    networks: [default]

networks:
  default:
    name: gnasty-chat
